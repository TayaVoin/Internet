# Вопросы для самопроверки
## 1. В чем разница между Forward Proxy (обычный прокси) и Reverse Proxy (обратный прокси)?
- Forward Proxy: Представляет клиента. Используется для обхода блокировок, фильтрации трафика и анонимизации клиентов.
- Reverse Proxy: Представляет сервер. Защищает сервер, балансируя нагрузку и скрывая внутреннюю инфраструктуру.
## 2. Что такое Upstream в терминологии Nginx?
Upstream — это блок в конфигурации Nginx, который определяет группу backend-серверов. Nginx может распределять нагрузку между ними. Проще говоря, это "список адресов", куда Nginx будет проксировать запросы.
## 3. Зачем скрывать реальные IP-адреса сервисов от клиента?
- Безопасность: Если клиент знает реальный IP и порт сервиса, он может атаковать его напрямую, минуя все защиты (rate limiting, авторизацию). Спрятав сервисы за гейтом и закрыв к ним прямой доступ фаерволом, делаем систему намного безопаснее.
- Гибкость (масштабирование и перемещение): Можно менять внутреннюю архитектуру как хочешь. Например, перенести сервис на другой сервер, добавить еще 10 экземпляров для балансировки нагрузки или разделить один сервис на два. Клиент ничего не заметит, так как он всегда стучится в одну и ту же точку — API Gateway. Ему не нужно обновлять закладки или настройки.
## 4. Какие еще задачи, кроме маршрутизации, может выполнять API Gateway (назовите хотя бы 2)?
- Rate limiting (Ограничение скорости запросов): Защита бэкенда от перегрузки и DDoS-атак. Можно ограничить количество запросов с одного IP-адреса или для одного API-ключа в секунду/минуту.
- Аутентификация и авторизация: Gateway может проверять JWT-токены или API-ключи еще до того, как запрос дойдет до сервиса. Если токен невалидный, запрос даже не пойдет внутрь, что экономит ресурсы бэкенда.
- Termination SSL/TLS: Расшифровка HTTPS-трафика. Внутри защищенной сети (между гейтом и сервисами) данные могут ходить по обычному HTTP, что быстрее и проще. Гейт берет на себя всю криптографию.
- Логирование и сбор метрик: Все запросы проходят через одну точку, что делает сбор статистики и централизованное логирование удобнее.
## 5. Что произойдет, если Gateway упадет? Как можно от этого защититься?
- Если упадет API Gateway, упадет вся система. Клиенты не смогут достучаться ни до одного сервиса. Gateway становится единой точкой отказа (Single Point of Failure, SPoF).
- Защита:
1. Запустить несколько реплик (экземпляров) Gateway. Обычно их запускают на разных физических серверах.
2. Балансировщик нагрузки перед Gateway. Перед группой Gateway ставится еще один балансировщик, который распределяет трафик между живыми экземплярами. Если один Gateway умирает, балансировщик перестает отправлять на него трафик.
3. Использовать инструменты оркестрации, типа Kubernetes, который сам следит за состоянием подов (контейнеров с гейтом) и перезапускает упавшие, а также распределяет между ними нагрузку через Service.
